<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>xgxr Overview • xgxr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="xgxr Overview">
<meta property="og:description" content="xgxr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xgxr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sad_pkpd.html">PKPD Single Ascending Dose example</a>
    </li>
    <li>
      <a href="../articles/theoph.html">PK Exploration with nlmixr dataset</a>
    </li>
    <li>
      <a href="../articles/xgxr_overview.html">xgxr Overview</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="xgxr_overview_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>xgxr Overview</h1>
                        <h4 class="author">Andrew Stein, Fariba Khanshan, Alison Margolskee</h4>
            
            <h4 class="date">2021-02-01</h4>
      
      
      <div class="hidden name"><code>xgxr_overview.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The xgxr package supports a structured approach to exploring PKPD data (<a href="https://opensource.nibr.com/xgx">outlined here</a>). It also contains helper functions for enabling the modeler to follow best R practices (by appending the program name, figure name location, and draft status to each plot) and enabling the modeler to follow best graphical practices (by providing an xgx theme that reduces chart ink, and by providing time-scale, log-scale, and reverse-log-transform-scale functions for more readable axes).</p>
</div>
<div id="required-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#required-packages" class="anchor"></a>Required Packages</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://opensource.nibr.com/xgx">xgxr</a></span><span class="op">)</span></code></pre></div>
<!-- ## Data exploration
 This package offers two frameworks for exploring data 

1. Generate an Rmarkdown shell using `xgx_create_rmarkdown()`, which the user then edits with their dataset and column names.   This Rmarkdown document relies on the `dplyr` and `ggplot2` packages, in addition to some add-on functionality to `ggplot2` that is provided by the `xgx` package.  The Rmarkdown document is designed to be easy for the modeler to customize as needed.
2. Create a single page of overview of the data using the function `xgx_PK_summary` (and other functions to be added).  This function is meant to provide a quick overview of the data on one page, but is not as customizable as the Rmarkdown document

### Rmarkdown shell for data exploration
To create a shell Rmarkdown with the code for exploring data, use `xgx_create_rmarkdown`.  Currently, only the "pk" type is implemented.


```r
# xgx_create_rmarkdown(type = "pk", open_file = FALSE)
```

### PK summary plots
Function to make key plots of pharmacokinetic (PK) data. 


```r
#if (sessionInfo()$otherPkgs$ggplot2$Version == "2.2.1") {
#   nsubj <- 50
#   ntime <- 8
#   time <- rep(c(1, 2, 4, 8, 12, 24, 36, 48), nsubj)
#   id <- sort(rep(seq(1, nsubj), ntime))
#   trt <- sort(rep(c(25, 50, 100, 150, 300), ntime * nsubj / 5))
#   ka <- rep(rlnorm(nsubj, -0.5, 0.3), each = ntime)
#   ke <- rep(rlnorm(nsubj, -3, 0.3), each = ntime)
#   conc <- trt * (ka * ke / (ka - ke)) * (exp(-time * ke) - exp(-time * ka)) * (rep(stats::rlnorm(ntime * nsubj, 0.3, 0.1)))
 
#   data <- data.frame(TIME = time, CONC = conc, ID = id, TRT = trt)
#   xgx_PK_summary(data = data, labels = list(TRT = "Dose"),
#                  units_dataset = list(TIME = "Hours", CONC = "ng/mL", TRT = "mg"))
#} else {
#  print("Currently only works with ggplot2 version 2.2.1 (on DaVinci), and not version 3")
#}
```
-->
</div>
<div id="traceability-annotating-and-saving-plots-and-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#traceability-annotating-and-saving-plots-and-tables" class="anchor"></a>Traceability: annotating and saving plots and tables</h2>
<div id="saving-figures" class="section level3">
<h3 class="hasAnchor">
<a href="#saving-figures" class="anchor"></a>Saving figures</h3>
<p>Our best practices require that we mark plots as “DRAFT” if not yet final, and also list the program that created the plot and the location where the plot is stored. This helps with the traceability of the work, by ensuring that the following information is available for every plot in a report: the R script used to create the figure, the location where the figure is stored, and the time and date when the figure was created. The key functions here are: * <code>xgx_annotate_status</code> allows for the addition of text (like the word draft) to the plots * <code>xgx_annotate_filenames</code> allows for printing the filenames as a caption for the plot. It requires an input list <code>dirs</code> with particular fields, as shown below.</p>
<p>The function <code>xgx_save</code> calls both of the above functions and it is illustrated below.</p>
<p>This function also requires the user to input a width and height for the graph. This is because often, the plots that are created have font that is so small that it’s impossible to read the x and y axes. We’ve found that the easiest way to set the font size is “indirectly” by specifying the height and width of the graph. Note that if you have a plot window open, you can get the height and width by typing <code><a href="https://rdrr.io/r/grDevices/dev.size.html">dev.size()</a></code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dirs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  parent_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>,
  rscript_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>,
  rscript_name <span class="op">=</span> <span class="st">"example.R"</span>,
  results_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>,
  filename_prefix <span class="op">=</span> <span class="st">"example_"</span><span class="op">)</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, y <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span><span class="op">)</span>
<span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="../reference/xgx_save.html">xgx_save</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">4</span>, height <span class="op">=</span> <span class="fl">4</span>, dirs <span class="op">=</span> <span class="va">dirs</span>, filename_main <span class="op">=</span> <span class="st">"example_plot"</span>, status <span class="op">=</span> <span class="st">"DRAFT"</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
<p>The the function <code>xgx_save</code> works only with ggplot objects. If the figure that is created is not a ggplot object, it will not work. An alternative is to use <code>xgx_annotate_status_png</code> to add the status and filename to png files.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, y <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span><span class="op">)</span>
<span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">filename</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"png_example.png"</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="va">filename</span>, plot <span class="op">=</span> <span class="va">g</span>, height <span class="op">=</span> <span class="fl">4</span>, width <span class="op">=</span> <span class="fl">4</span>, dpi <span class="op">=</span> <span class="fl">75</span><span class="op">)</span>
<span class="fu"><a href="../reference/xgx_annotate_status_png.html">xgx_annotate_status_png</a></span><span class="op">(</span><span class="va">filename</span>, <span class="st">"./ExampleScript.R"</span><span class="op">)</span>
<span class="co">#&gt; Add footnote to /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmp99TfWT/png_example.png</span></code></pre></div>
<!-- ![image](png_example.png) -->
</div>
<div id="saving-tables" class="section level3">
<h3 class="hasAnchor">
<a href="#saving-tables" class="anchor"></a>Saving tables</h3>
<p>We also provide a function <code>xgx_save_table</code> for annotating the relevant information to csv files. The annotated table is shown below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, SEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span><span class="op">)</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xgx_save_table.html">xgx_save_table</a></span><span class="op">(</span><span class="va">x</span>, dirs <span class="op">=</span> <span class="va">dirs</span>, filename_main <span class="op">=</span> <span class="st">"ExampleTable"</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="92%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="left">ID</th>
<th align="left">SEX</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">male</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">female</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmp99TfWT</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmp99TfWT/example.R</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmp99TfWT/example_unnamed_table_.csv</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Created: /2021-02-01 19:16:05</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="graphics-helpers" class="section level2">
<h2 class="hasAnchor">
<a href="#graphics-helpers" class="anchor"></a>Graphics helpers</h2>
<div id="xgx-theme" class="section level3">
<h3 class="hasAnchor">
<a href="#xgx-theme" class="anchor"></a>xgx theme</h3>
<p>The <code><a href="../reference/xgx_theme.html">xgx_theme()</a></code> function includes the xGx recommended plot settings. It sets the background to white with light grey lines for the major and minor breaks. This minimizes chart ink as recommended by Edward Tufte. You can add <code><a href="../reference/xgx_theme.html">xgx_theme()</a></code> to an existing <code>ggplot</code> object, or you can call <code><a href="../reference/xgx_plot.html">xgx_plot()</a></code> in place of <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> for all of your plot initiations.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">cyl</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
<p>You may wish to set the theme to <code>xgx_theme</code> for your R session, as we do below.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span><span class="op">(</span><span class="fu"><a href="../reference/xgx_theme.html">xgx_theme</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="co">## Alternative, equivalent function:</span>
<span class="fu"><a href="../reference/xgx_theme_set.html">xgx_theme_set</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<!-- ### Spaghetti plot
Spaghetti plots combine dots and lines, grouped and colored by individuals onto one plot. Try out `xgx_geom_spaghetti` which combines `geom_point()` and `geom_line()` into one `geom`, grouping and coloring by the `group` aesthetic. Calling `xgx_spaghetti` further combines `xgx_plot()` and `xgx_geom_spaghetti()` into one line.
-->
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># time &lt;- rep(seq(1,10),5)</span>
<span class="co"># id &lt;- sort(rep(seq(1,5), 10))</span>
<span class="co"># conc &lt;- exp(-time)*sort(rep(rlnorm(5),10))</span>
<span class="co"># </span>
<span class="co"># data &lt;- data.frame(time = time, concentration  = conc, id = factor(id))</span>
<span class="co"># xgx_plot() + xgx_geom_spaghetti(data = data, mapping = aes(x = time, y = concentration, group = id, color = id))</span>
<span class="co"># </span>
<span class="co"># xgx_spaghetti(data = data, mapping = aes(x = time, y = concentration, group = id, color = id))</span></code></pre></div>
</div>
<div id="confidence-intervals" class="section level3">
<h3 class="hasAnchor">
<a href="#confidence-intervals" class="anchor"></a>Confidence intervals</h3>
<p>The code for confidence intervals is a bit complex and hard to remember. Rather than copy-pasting this code we provide the function <code>xgx_stat_ci</code> for calculating and plotting default confidence intervals and also <code>xgx_geom_ci</code> for percentile intervals. <code>xgx_stat_ci</code> allows the definition of multiple <code>geom</code> options in one function call, defined through a list. The default is <code>geom = list("point","line","errorbar")</code>. Additional ggplot options can be fed through the <code>ggplot</code> object call, or the <code>xgx_stat_ci</code> layer. (Note that <code>xgx_stat_ci</code> and <code>xgx_geom_ci</code> are equivalent). <code>xgx_stat_pi</code> and <code>xgx_geom_pi</code> work in a similar fashion but for percentile intervals.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>,
                   y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">+</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">60</span><span class="op">)</span>,
                   group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>conf_level <span class="op">=</span> <span class="fl">.95</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-10-1.png" width="384"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="../reference/xgx_stat_pi.html">xgx_stat_pi</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="fl">.95</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-10-2.png" width="384"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>conf_level <span class="op">=</span> <span class="fl">.95</span>, geom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"pointrange"</span>,<span class="st">"line"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-10-3.png" width="384"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>conf_level <span class="op">=</span> <span class="fl">.95</span>, geom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"ribbon"</span>,<span class="st">"line"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-10-4.png" width="384"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, group <span class="op">=</span> <span class="va">group</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>conf_level <span class="op">=</span> <span class="fl">.95</span>, alpha <span class="op">=</span>  <span class="fl">0.5</span>,
                position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-10-5.png" width="384"></p>
<p>The default settings calculate the confidence interval based on the Student t Distribution (assuming normally distributed data). You can also specify “lognormal”“,”binomial"" or “multinomial”" for the <code>distribution</code>. The first will perform the confidence interval operation on the log-scaled data, the second uses the binomial exact confidence interval calculation from the <code>binom</code> package, and the third uses <code>MultinomCI</code> from the <code>DescTools</code> package.</p>
<p>Note: you DO NOT need to use both <code>distribution = "lognormal"</code> and <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_log10()</a></code>, choose only one of these.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># plotting lognormally distributed data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>,
                   y <span class="op">=</span> <span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">+</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">60</span><span class="op">)</span><span class="op">)</span>,
                   group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
 <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>conf_level <span class="op">=</span> <span class="fl">0.95</span>, distribution <span class="op">=</span> <span class="st">"lognormal"</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-11-1.png" width="384"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"> 
<span class="co"># note: you DO NOT need to use both distribution = "lognormal" and scale_y_log10()</span>
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
 <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>conf_level <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="../reference/xgx_scale_y_log10.html">xgx_scale_y_log10</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-11-2.png" width="384"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># plotting binomial data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>,
                  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span>,
                  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
 <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>conf_level <span class="op">=</span> <span class="fl">0.95</span>, distribution <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-11-3.png" width="384"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="co"># Example plotting the percent of subjects in a categorical covariate group by treatment.</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">120</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">100</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span>,
                 response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Trt1"</span>, <span class="st">"Trt2"</span>, <span class="st">"Trt3"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
                 covariate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"White"</span>,<span class="st">"Black"</span>,<span class="st">"Asian"</span>,<span class="st">"Other"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, 
                                    levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"White"</span>, <span class="st">"Black"</span>, <span class="st">"Asian"</span>, <span class="st">"Other"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span><span class="op">)</span> <span class="op">+</span>
 <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">response</span>, response <span class="op">=</span> <span class="va">covariate</span><span class="op">)</span>,
             distribution <span class="op">=</span> <span class="st">"ordinal"</span><span class="op">)</span> <span class="op">+</span>
 <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span>, response <span class="op">=</span> <span class="va">covariate</span><span class="op">)</span>, geom <span class="op">=</span> <span class="st">"hline"</span>,
             distribution <span class="op">=</span> <span class="st">"ordinal"</span><span class="op">)</span> <span class="op">+</span>
 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/label_percent.html">percent_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">covariate</span><span class="op">)</span> <span class="op">+</span> 
 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Treatment group"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Percent of subjects by category"</span><span class="op">)</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are identical to response: PANEL</span>
<span class="co">#&gt;   These will be used for differentiating response groups in the resulting plot.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are identical to response: PANEL</span>
<span class="co">#&gt;   These will be used for differentiating response groups in the resulting plot.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are identical to response: PANEL</span>
<span class="co">#&gt;   These will be used for differentiating response groups in the resulting plot.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are identical to response: PANEL</span>
<span class="co">#&gt;   These will be used for differentiating response groups in the resulting plot.</span>
<span class="co">#&gt; Warning: Unknown or uninitialised column: `flipped_aes`.</span>

<span class="co">#&gt; Warning: Unknown or uninitialised column: `flipped_aes`.</span>
<span class="co">#&gt; Warning: Unknown or uninitialised column: `width`.</span>
<span class="co">#&gt; geom_path: Each group consists of only one observation. Do you need to adjust</span>
<span class="co">#&gt; the group aesthetic?</span>
<span class="co">#&gt; geom_path: Each group consists of only one observation. Do you need to adjust</span>
<span class="co">#&gt; the group aesthetic?</span>
<span class="co">#&gt; geom_path: Each group consists of only one observation. Do you need to adjust</span>
<span class="co">#&gt; the group aesthetic?</span>
<span class="co">#&gt; geom_path: Each group consists of only one observation. Do you need to adjust</span>
<span class="co">#&gt; the group aesthetic?</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-11-4.png" width="384"></p>
<p><code>xgx_stat_ci</code> can now also cut data by quantiles of <code>x</code> using the <code>bins</code> option, e.g. <code>bins = 4</code> will cut the data by quartiles of <code>x</code>. You can also supply your own breaks to cut the data.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># plotting </span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span>
<span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">120</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">100</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span>,
              response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Mild"</span>,<span class="st">"Moderate"</span>,<span class="st">"Severe"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
              covariate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Male"</span>,<span class="st">"Female"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>y <span class="op">=</span> <span class="op">(</span><span class="fl">50</span> <span class="op">+</span> <span class="fl">20</span><span class="op">*</span><span class="va">x</span><span class="op">/</span><span class="op">(</span><span class="fl">200</span> <span class="op">+</span> <span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co"># plotting a lognormally distributed variable by quartiles of x</span>
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, colour <span class="op">=</span> <span class="va">covariate</span><span class="op">)</span>,
              distribution <span class="op">=</span> <span class="st">"lognormal"</span>, bins <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># plotting ordinal or multinomial data, by quartiles of x</span>
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, response <span class="op">=</span> <span class="va">response</span>, colour <span class="op">=</span> <span class="va">covariate</span><span class="op">)</span>,
              distribution <span class="op">=</span> <span class="st">"ordinal"</span>, bins <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/label_percent.html">percent_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">response</span><span class="op">)</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are identical to response: PANEL</span>
<span class="co">#&gt;   These will be used for differentiating response groups in the resulting plot.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are different from response: colour</span>
<span class="co">#&gt;   These will be used to divide the data into different groups before calculating summary statistics on the response.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are identical to response: PANEL</span>
<span class="co">#&gt;   These will be used for differentiating response groups in the resulting plot.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are different from response: colour</span>
<span class="co">#&gt;   These will be used to divide the data into different groups before calculating summary statistics on the response.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are identical to response: PANEL</span>
<span class="co">#&gt;   These will be used for differentiating response groups in the resulting plot.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are different from response: colour</span>
<span class="co">#&gt;   These will be used to divide the data into different groups before calculating summary statistics on the response.</span>
<span class="co">#&gt; Warning: Unknown or uninitialised column: `flipped_aes`.</span>

<span class="co">#&gt; Warning: Unknown or uninitialised column: `flipped_aes`.</span>
<span class="co">#&gt; Warning: Unknown or uninitialised column: `width`.</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-12-2.png" width="672"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_stat_ci.html">xgx_stat_ci</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, response <span class="op">=</span> <span class="va">response</span>, colour <span class="op">=</span> <span class="va">response</span><span class="op">)</span>,
              distribution <span class="op">=</span> <span class="st">"ordinal"</span>, bins <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org//reference/label_percent.html">percent_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">covariate</span><span class="op">)</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are identical to response: colour</span>
<span class="co">#&gt;   These will be used for differentiating response groups in the resulting plot.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are different from response: PANEL</span>
<span class="co">#&gt;   These will be used to divide the data into different groups before calculating summary statistics on the response.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are identical to response: colour</span>
<span class="co">#&gt;   These will be used for differentiating response groups in the resulting plot.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are different from response: PANEL</span>
<span class="co">#&gt;   These will be used to divide the data into different groups before calculating summary statistics on the response.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are identical to response: colour</span>
<span class="co">#&gt;   These will be used for differentiating response groups in the resulting plot.</span>
<span class="co">#&gt; In xgx_stat_ci: </span>
<span class="co">#&gt;   The following aesthetics are different from response: PANEL</span>
<span class="co">#&gt;   These will be used to divide the data into different groups before calculating summary statistics on the response.</span>
<span class="co">#&gt; Warning: Unknown or uninitialised column: `flipped_aes`.</span>
<span class="co">#&gt; Warning: Unknown or uninitialised column: `flipped_aes`.</span>
<span class="co">#&gt; Warning: Unknown or uninitialised column: `width`.</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-12-3.png" width="672"></p>
</div>
<div id="nonlinear-smoothing-e-g--emax" class="section level3">
<h3 class="hasAnchor">
<a href="#nonlinear-smoothing-e-g--emax" class="anchor"></a>Nonlinear smoothing (e.g. Emax)</h3>
<p>The current ggplot2::geom_smooth does not allow for plotting confidence bands for method = “nls”, as ggplot2 does not supply a <code>predictdf</code> for an object of class <code>nls</code>, which geom_smooth silently calls to calculate the ymin and ymax for the confidence bands. The xgxr package includes a definition of <code>predictdf.nls</code>, allowing for confidence bands for method = “nls”. xgxr also includes an Emax smooth function called <code>xgx_geom_smooth_emax</code> which utilizes the “nlsLM” method, and silently calls the <code>predictdf.nls</code> defined by xgxr.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123456</span><span class="op">)</span>

<span class="va">Nsubj</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="va">Doses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">25</span>, <span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span>
<span class="va">Ntot</span> <span class="op">&lt;-</span> <span class="va">Nsubj</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">Doses</span><span class="op">)</span>
<span class="va">times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">14</span>,<span class="fl">30</span>,<span class="fl">60</span>,<span class="fl">90</span><span class="op">)</span>

<span class="va">dat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">Ntot</span><span class="op">)</span>,
                   DOSE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">Doses</span>, <span class="va">Nsubj</span><span class="op">)</span>,
                   E0 <span class="op">=</span> <span class="fl">50</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span><span class="op">(</span><span class="va">Ntot</span>, <span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>,
                   Emax <span class="op">=</span> <span class="fl">100</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span><span class="op">(</span><span class="va">Ntot</span>, <span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>,
                   ED50 <span class="op">=</span> <span class="fl">50</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span><span class="op">(</span><span class="va">Ntot</span>, <span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Response <span class="op">=</span> <span class="op">(</span><span class="va">E0</span> <span class="op">+</span> <span class="va">Emax</span><span class="op">*</span><span class="va">DOSE</span><span class="op">/</span><span class="op">(</span><span class="va">DOSE</span> <span class="op">+</span> <span class="va">ED50</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span><span class="op">(</span><span class="va">Ntot</span>, <span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">Ntot</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">times</span><span class="op">)</span><span class="op">)</span>, Time <span class="op">=</span> <span class="va">times</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span> 

<span class="va">gg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat1</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DOSE</span>, y <span class="op">=</span> <span class="va">Response</span><span class="op">)</span><span class="op">)</span>
<span class="va">gg</span> <span class="op">&lt;-</span> <span class="va">gg</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">gg</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-13-1.png" width="672"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">gg</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"nlsLM"</span>, 
                 formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">E0</span> <span class="op">+</span> <span class="va">Emax</span><span class="op">*</span><span class="va">x</span><span class="op">/</span><span class="op">(</span><span class="va">ED50</span> <span class="op">+</span> <span class="va">x</span><span class="op">)</span>,
                 method.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>E0 <span class="op">=</span> <span class="fl">1</span>, ED50 <span class="op">=</span> <span class="fl">1</span>, Emax <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
                                    lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">0</span>, <span class="op">-</span><span class="cn">Inf</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Warning: Computation failed in `stat_smooth()`:</span>
<span class="co">#&gt; $ operator is invalid for atomic vectors</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-13-2.png" width="672"></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">gg</span> <span class="op">+</span> <span class="fu"><a href="../reference/xgx_stat_smooth.html">xgx_geom_smooth_emax</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Warning in xgx_geom_smooth_emax(): Formula not specified.</span>
<span class="co">#&gt; Using default formula y ~ E0 + Emax*x/(ED50 + x), </span>
<span class="co">#&gt;             initializing E0, Emax, and ED50 to 1, </span>
<span class="co">#&gt;             and setting lower bound on ED50 to 0</span>

<span class="co">#&gt; Warning in xgx_geom_smooth_emax(): Computation failed in `stat_smooth()`:</span>
<span class="co">#&gt; $ operator is invalid for atomic vectors</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-13-3.png" width="672"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">gg</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/xgx_stat_smooth.html">xgx_geom_smooth_emax</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"ribbon"</span>, color <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="cn">NA</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/xgx_stat_smooth.html">xgx_geom_smooth_emax</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"line"</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span>
<span class="co">#&gt; Warning in xgx_geom_smooth_emax(geom = "ribbon", color = "black", fill = NA, : Formula not specified.</span>
<span class="co">#&gt; Using default formula y ~ E0 + Emax*x/(ED50 + x), </span>
<span class="co">#&gt;             initializing E0, Emax, and ED50 to 1, </span>
<span class="co">#&gt;             and setting lower bound on ED50 to 0</span>
<span class="co">#&gt; Warning in xgx_geom_smooth_emax(geom = "line", color = "red"): Formula not specified.</span>
<span class="co">#&gt; Using default formula y ~ E0 + Emax*x/(ED50 + x), </span>
<span class="co">#&gt;             initializing E0, Emax, and ED50 to 1, </span>
<span class="co">#&gt;             and setting lower bound on ED50 to 0</span>
<span class="co">#&gt; Warning: Computation failed in `stat_smooth()`:</span>
<span class="co">#&gt; $ operator is invalid for atomic vectors</span>

<span class="co">#&gt; Warning: Computation failed in `stat_smooth()`:</span>
<span class="co">#&gt; $ operator is invalid for atomic vectors</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-13-4.png" width="672"></p>
</div>
<div id="nice-log-scale" class="section level3">
<h3 class="hasAnchor">
<a href="#nice-log-scale" class="anchor"></a>Nice log scale</h3>
<p>This version of the log scale function shows the tick marks between the major breaks (i.e. at 1, 2, 3, … 10, instead of just 1 and 10). It also uses <span class="math display">\[10^x\]</span> notation when the labels are base 10 and are very small or very large (&lt;.001 or &gt;9999)</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,
                 y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">0</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/xgx_scale_x_log10.html">xgx_scale_x_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/xgx_scale_y_log10.html">xgx_scale_y_log10</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Warning: Transformation introduced infinite values in continuous x-axis</span>
<span class="co">#&gt; Warning: Transformation introduced infinite values in continuous y-axis</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-14-1.png" width="672"></p>
</div>
<div id="reverse-log-transform" class="section level3">
<h3 class="hasAnchor">
<a href="#reverse-log-transform" class="anchor"></a>Reverse log transform</h3>
<p>This transform is useful for plotting data on a percentage scale that can approach 100% (such as receptor occupancy data).</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">conc</span> <span class="op">&lt;-</span> <span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>, <span class="fl">3</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>
<span class="va">ec50</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>concentration <span class="op">=</span> <span class="va">conc</span>, 
                  bound_receptor <span class="op">=</span> <span class="fl">1</span> <span class="op">*</span> <span class="va">conc</span> <span class="op">/</span> <span class="op">(</span><span class="va">conc</span> <span class="op">+</span> <span class="va">ec50</span><span class="op">)</span><span class="op">)</span>
<span class="va">gy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">concentration</span>, y <span class="op">=</span> <span class="va">bound_receptor</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/xgx_scale_x_log10.html">xgx_scale_x_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_scale_y_reverselog10.html">xgx_scale_y_reverselog10</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">gx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">bound_receptor</span>, y <span class="op">=</span> <span class="va">concentration</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/xgx_scale_y_log10.html">xgx_scale_y_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_scale_x_reverselog10.html">xgx_scale_x_reverselog10</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">gy</span>, <span class="va">gx</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-15-1.png" width="672"></p>
</div>
<div id="nice-scale-for-percent-change-data" class="section level3">
<h3 class="hasAnchor">
<a href="#nice-scale-for-percent-change-data" class="anchor"></a>Nice scale for percent change data</h3>
<p>This transform is useful for plotting percent change from baseline data. Percent change data can range from -100% to +Inf%, and depending on the range of the data, a linear scale can lose the desired resolution. This transform plots percent change data on a scale of log10(PCHG + 100%), similar to a log scale of ratio to baseline.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">Nsubj</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="va">Doses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">25</span>, <span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span>
<span class="va">Ntot</span> <span class="op">&lt;-</span> <span class="va">Nsubj</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">Doses</span><span class="op">)</span>
<span class="va">times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">14</span>,<span class="fl">30</span>,<span class="fl">60</span>,<span class="fl">90</span><span class="op">)</span>

<span class="va">dat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">Ntot</span><span class="op">)</span>,
                   DOSE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">Doses</span>, <span class="va">Nsubj</span><span class="op">)</span>,
                   PD0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span><span class="op">(</span><span class="va">Ntot</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>,
                   Kout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">Ntot</span>,<span class="op">-</span><span class="fl">2</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>,
                   Imax <span class="op">=</span> <span class="fl">1</span>,
                   ED50 <span class="op">=</span> <span class="fl">25</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>PDSS <span class="op">=</span> <span class="va">PD0</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">Imax</span><span class="op">*</span><span class="va">DOSE</span><span class="op">/</span><span class="op">(</span><span class="va">DOSE</span> <span class="op">+</span> <span class="va">ED50</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">Ntot</span>, <span class="fl">0.05</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">Ntot</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">times</span><span class="op">)</span><span class="op">)</span>, Time <span class="op">=</span> <span class="va">times</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>PD <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="va">PD0</span> <span class="op">-</span> <span class="va">PDSS</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">Kout</span><span class="op">*</span><span class="va">Time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="va">PDSS</span><span class="op">)</span>, 
                PCHG <span class="op">=</span> <span class="op">(</span><span class="va">PD</span> <span class="op">-</span> <span class="va">PD0</span><span class="op">)</span><span class="op">/</span><span class="va">PD0</span><span class="op">)</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dat1</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">Time</span> <span class="op">==</span> <span class="fl">90</span><span class="op">)</span>, 
                <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DOSE</span>, y <span class="op">=</span> <span class="va">PCHG</span>, group <span class="op">=</span> <span class="va">DOSE</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_theme.html">xgx_theme</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_scale_y_percentchangelog10.html">xgx_scale_y_percentchangelog10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Percent Change from Baseline"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Dose (mg)"</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-16-1.png" width="672"></p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dat1</span>, 
                <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Time</span>, y <span class="op">=</span> <span class="va">PCHG</span>, group <span class="op">=</span> <span class="va">ID</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">DOSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_theme.html">xgx_theme</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_scale_y_percentchangelog10.html">xgx_scale_y_percentchangelog10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Dose (mg)"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Percent Change from Baseline"</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-16-2.png" width="672"></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">Ntot</span><span class="op">)</span>,
                  DOSE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">Doses</span>, <span class="va">Nsubj</span><span class="op">)</span>,
                  PD0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span><span class="op">(</span><span class="va">Ntot</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>,
                  Kout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">Ntot</span>,<span class="op">-</span><span class="fl">2</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>,
                  Emax <span class="op">=</span> <span class="fl">50</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html">rlnorm</a></span><span class="op">(</span><span class="va">Ntot</span>, <span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>,
                  ED50 <span class="op">=</span> <span class="fl">300</span><span class="op">)</span> <span class="op">%&gt;%</span>
 <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>PDSS <span class="op">=</span> <span class="va">PD0</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">Emax</span><span class="op">*</span><span class="va">DOSE</span><span class="op">/</span><span class="op">(</span><span class="va">DOSE</span> <span class="op">+</span> <span class="va">ED50</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">Ntot</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">Ntot</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">times</span><span class="op">)</span><span class="op">)</span>, Time <span class="op">=</span> <span class="va">times</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>PD <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="va">PD0</span> <span class="op">-</span> <span class="va">PDSS</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">Kout</span><span class="op">*</span><span class="va">Time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="va">PDSS</span><span class="op">)</span>, 
                PCHG <span class="op">=</span> <span class="op">(</span><span class="va">PD</span> <span class="op">-</span> <span class="va">PD0</span><span class="op">)</span><span class="op">/</span><span class="va">PD0</span><span class="op">)</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dat2</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DOSE</span>, y <span class="op">=</span> <span class="va">PCHG</span>, group <span class="op">=</span> <span class="va">DOSE</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_theme.html">xgx_theme</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_scale_y_percentchangelog10.html">xgx_scale_y_percentchangelog10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Percent Change from Baseline"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Dose (mg)"</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-16-3.png" width="672"></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dat2</span>, 
                <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Time</span>, y <span class="op">=</span> <span class="va">PCHG</span>, group <span class="op">=</span> <span class="va">ID</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">DOSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_theme.html">xgx_theme</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/xgx_scale_y_percentchangelog10.html">xgx_scale_y_percentchangelog10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Dose (mg)"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Percent Change from Baseline"</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-16-4.png" width="672"></p>
</div>
<div id="scaling-x-axis-as-a-time-scale" class="section level3">
<h3 class="hasAnchor">
<a href="#scaling-x-axis-as-a-time-scale" class="anchor"></a>Scaling x-axis as a time scale</h3>
<p>For time, it’s often good for the x ticks to be spaced in a particular way. For instance, for hours, subdividing in increments by 24, 12, 6, and 3 hours can make more sense than by 10 or 100. Similarly for days, increments of 7 or 28 days are preferred over 5 or 10 days. <code>xgx_scale_x_time_units</code> allows for this, where it is the input and output units.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, y <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span><span class="op">)</span>
<span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xgx_plot.html">xgx_plot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">g1</span> <span class="op">&lt;-</span> <span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="../reference/xgx_scale_x_time_units.html">xgx_scale_x_time_units</a></span><span class="op">(</span>units_dataset <span class="op">=</span> <span class="st">"hours"</span>, units_plot <span class="op">=</span> <span class="st">"hours"</span><span class="op">)</span>
<span class="va">g2</span> <span class="op">&lt;-</span> <span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="../reference/xgx_scale_x_time_units.html">xgx_scale_x_time_units</a></span><span class="op">(</span>units_dataset <span class="op">=</span> <span class="st">"hours"</span>, units_plot <span class="op">=</span> <span class="st">"days"</span><span class="op">)</span>
<span class="va">g3</span> <span class="op">&lt;-</span> <span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="../reference/xgx_scale_x_time_units.html">xgx_scale_x_time_units</a></span><span class="op">(</span>units_dataset <span class="op">=</span> <span class="st">"hours"</span>, units_plot <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span>
<span class="va">g4</span> <span class="op">&lt;-</span> <span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="../reference/xgx_scale_x_time_units.html">xgx_scale_x_time_units</a></span><span class="op">(</span>units_dataset <span class="op">=</span> <span class="st">"hours"</span>, units_plot <span class="op">=</span> <span class="st">"months"</span><span class="op">)</span>

<span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">g1</span>, <span class="va">g2</span>, <span class="va">g3</span>, <span class="va">g4</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="xgxr_overview_files/figure-html/unnamed-chunk-17-1.png" width="672"></p>
</div>
</div>
<div id="data-checking" class="section level2">
<h2 class="hasAnchor">
<a href="#data-checking" class="anchor"></a>Data checking</h2>
<div id="numerical-check" class="section level3">
<h3 class="hasAnchor">
<a href="#numerical-check" class="anchor"></a>Numerical check</h3>
<p>We’ve found that during exploration, it can be extremely important to check the dataset for issues. This can be done using the <code>xgx_check_data</code> or <code>xgx_summarize_data</code> function (the two functions are identical).</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">mad_missing_duplicates</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">CMT</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>DV      <span class="op">=</span> <span class="va">LIDV</span>,
         YTYPE   <span class="op">=</span> <span class="va">CMT</span>,
         USUBJID <span class="op">=</span> <span class="va">ID</span><span class="op">)</span>
<span class="va">covariates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"WEIGHTB"</span>, <span class="st">"SEX"</span><span class="op">)</span>
<span class="va">check</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xgx_check_data.html">xgx_check_data</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">covariates</span><span class="op">)</span>
<span class="co">#&gt; Warning in xgx_check_data(data, covariates): Setting ID column equal to USUBJID</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; DATA SUMMARY</span>
<span class="co">#&gt; CONTINUOUS COVARIATES</span>
<span class="co">#&gt; CATEGORICAL COVARIATES</span>
<span class="co">#&gt; POSSIBLE DATA ISSUES - FIRST 6 RECORDS</span>
<span class="co">#&gt; The following columns contained missing values</span>
<span class="co">#&gt; DV:368</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">check</span><span class="op">$</span><span class="va">summary</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Category</th>
<th align="left">Description</th>
<th align="left">YTYPE</th>
<th align="left">Statistic</th>
<th align="right">Value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Patients</td>
<td align="left">Number of Patients</td>
<td align="left">-</td>
<td align="left">60</td>
<td align="right">60</td>
</tr>
<tr class="even">
<td align="left">MDV</td>
<td align="left">Number of patients with zero PK or PD observations</td>
<td align="left">all</td>
<td align="left">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">MDV</td>
<td align="left">Number of Missing Data Points (MDV==1 and EVID==0)</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">MDV</td>
<td align="left">Number of Missing Data Points (MDV==1 and EVID==0)</td>
<td align="left">2</td>
<td align="left">99</td>
<td align="right">99</td>
</tr>
<tr class="odd">
<td align="left">MDV</td>
<td align="left">Number of Missing Data Points (MDV==1 and EVID==0)</td>
<td align="left">3</td>
<td align="left">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Dose</td>
<td align="left">Number of non-zero doses</td>
<td align="left">-</td>
<td align="left">300</td>
<td align="right">300</td>
</tr>
<tr class="odd">
<td align="left">Dose</td>
<td align="left">Number of zero doses (AMT==0)</td>
<td align="left">-</td>
<td align="left">60</td>
<td align="right">60</td>
</tr>
<tr class="even">
<td align="left">Dose</td>
<td align="left">Number of patients that never received drug</td>
<td align="left">-</td>
<td align="left">10</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">DV</td>
<td align="left">Number of Data Points</td>
<td align="left">1</td>
<td align="left">360</td>
<td align="right">360</td>
</tr>
<tr class="even">
<td align="left">DV</td>
<td align="left">Number of Data Points</td>
<td align="left">2</td>
<td align="left">1309</td>
<td align="right">1309</td>
</tr>
<tr class="odd">
<td align="left">DV</td>
<td align="left">Number of Data Points</td>
<td align="left">3</td>
<td align="left">600</td>
<td align="right">600</td>
</tr>
<tr class="even">
<td align="left">DV</td>
<td align="left">Number of Data Points per Individual</td>
<td align="left">1</td>
<td align="left">min = 6, median = 6, max = 6</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">DV</td>
<td align="left">Number of Data Points per Individual</td>
<td align="left">2</td>
<td align="left">min = 26, median = 26, max = 27</td>
<td align="right">26</td>
</tr>
<tr class="even">
<td align="left">DV</td>
<td align="left">Number of Data Points per Individual</td>
<td align="left">3</td>
<td align="left">min = 10, median = 10, max = 10</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">DV</td>
<td align="left">Number of Data Points with zero value (DV==0)</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">DV</td>
<td align="left">Number of Data Points with zero value (DV==0)</td>
<td align="left">2</td>
<td align="left">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">DV</td>
<td align="left">Number of Data Points with zero value (DV==0)</td>
<td align="left">3</td>
<td align="left">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">DV</td>
<td align="left">Number of Data Points with NA (is.na(DV))</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">DV</td>
<td align="left">Number of Data Points with NA (is.na(DV))</td>
<td align="left">2</td>
<td align="left">8</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">DV</td>
<td align="left">Number of Data Points with NA (is.na(DV))</td>
<td align="left">3</td>
<td align="left">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">DV+TIME</td>
<td align="left">Multiple measurements at same time</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">DV+TIME</td>
<td align="left">Multiple measurements at same time</td>
<td align="left">2</td>
<td align="left">32</td>
<td align="right">32</td>
</tr>
<tr class="odd">
<td align="left">DV+TIME</td>
<td align="left">Multiple measurements at same time</td>
<td align="left">3</td>
<td align="left">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">CENS</td>
<td align="left">Number of Censored Data Points</td>
<td align="left">1</td>
<td align="left">0 (0%)</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">CENS</td>
<td align="left">Number of Censored Data Points</td>
<td align="left">2</td>
<td align="left">9 (1%)</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">CENS</td>
<td align="left">Number of Censored Data Points</td>
<td align="left">3</td>
<td align="left">4 (1%)</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">All Columns</td>
<td align="left">Negative Values (number)</td>
<td align="left">-</td>
<td align="left">DV:12</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">All Columns</td>
<td align="left">Missing Values (number)</td>
<td align="left">-</td>
<td align="left">DV:368</td>
<td align="right">368</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">check</span><span class="op">$</span><span class="va">data_subset</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Data_Check_Issue</th>
<th align="right">ID</th>
<th align="right">TIME</th>
<th align="right">DV</th>
<th align="right">CENS</th>
<th align="right">YTYPE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">is.na(DV)</td>
<td align="right">15</td>
<td align="right">0.000</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">is.na(DV)</td>
<td align="right">21</td>
<td align="right">127.858</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">is.na(DV)</td>
<td align="right">22</td>
<td align="right">216.537</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">is.na(DV)</td>
<td align="right">40</td>
<td align="right">156.563</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">is.na(DV)</td>
<td align="right">47</td>
<td align="right">120.300</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">is.na(DV)</td>
<td align="right">50</td>
<td align="right">71.814</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>You can also get an overview of the covariates in the dataset with <code>xgx_summarize_covariates</code>. The covariate summaries are also provided in the <code>xgx_check_data</code> and <code>xgx_summarize_data</code> functions.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">covar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xgx_summarize_covariates.html">xgx_summarize_covariates</a></span><span class="op">(</span><span class="va">data</span>,<span class="va">covariates</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">covar</span><span class="op">$</span><span class="va">cts_covariates</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Covariate</th>
<th align="right">Nmissing</th>
<th align="right">min</th>
<th align="right">25th</th>
<th align="right">median</th>
<th align="right">75th</th>
<th align="right">max</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">WEIGHTB</td>
<td align="right">0</td>
<td align="right">52.8</td>
<td align="right">69.2</td>
<td align="right">78.9</td>
<td align="right">89.85</td>
<td align="right">109</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">covar</span><span class="op">$</span><span class="va">cat_covariates</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Covariate</th>
<th align="right">Nmissing</th>
<th align="right">Ndistinct</th>
<th align="left">Value (Count)</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">SEX</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="left">Female (30), Male (30)</td>
</tr></tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Andrew Stein, Alison Margolskee, Fariba Khanshan, Konstantin Krismer, Novartis Pharma AG.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
